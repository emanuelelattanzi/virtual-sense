<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Darjeeling: Heap management</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">Darjeeling
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">Heap management</div>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga9df18987debdbef5a02f1d9cdd4e4386">dj_mem_init</a> (void *mem_pointer, uint16_t mem_size)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga63dd8be2446b72b2efe36d04ee3f8946">dj_mem_alloc</a> (uint16_t size, uint16_t id)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga80b28d254760b11eae5837091ba2170b">dj_mem_free</a> (void *ptr)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#gae71125d192c6cebf730f1c445d980a76">dj_mem_getSize</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga4329550f3015b5ae66f9fea0784097b9">dj_mem_getFree</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga5aaeb88707f0a8e5c9e70ed5ed71b1d1">dj_mem_setPanicExceptionObject</a> (<a class="el" href="a00046.html#a82c216fbce658284af9f5ee4b6b35c71">dj_object</a> *obj)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00046.html#a82c216fbce658284af9f5ee4b6b35c71">dj_object</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#gaee46ca14b2599fff18762a5c99433589">dj_mem_getPanicExceptionObject</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga57770558d70867ea230a516fb5022fc5">dj_mem_pushCompactionUpdateStack</a> (<a class="el" href="a00053.html#a95c8e5ec70694afaac0e78c3561e32b2">ref_t</a> ref)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="el" href="a00053.html#a95c8e5ec70694afaac0e78c3561e32b2">ref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga909e403bf076c4317a914c13993cb5c7">dj_mem_popCompactionUpdateStack</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#gaaabe6bdf2d27f2e696117ce6dc981c72">dj_mem_shiftRuntimeIDs</a> (<a class="el" href="a00046.html#ac36eb8e5b5b5fb52bc355c65e07c7432">runtime_id_t</a> start, uint16_t range)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga52d7d8ac8fe4a9112502af01591beb77">dj_mem_markObject</a> (<a class="el" href="a00046.html#a789e305fed516672c865a933b161e2fb">dj_vm</a> *<a class="el" href="a00088.html#aefea9b9a4459e69921926a66608bf50e">vm</a>, <a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *chunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#gabfa81ed838dfda79d32b856544e47a44">dj_finalise</a> (<a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *chunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga29f5cc567ff4c9c4a29ccbb22488f6c8">dj_mem_mark</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga24390abc812e2057802ceb57e482ab6a">dj_mem_updateManagedReference</a> (<a class="el" href="a00046.html#a789e305fed516672c865a933b161e2fb">dj_vm</a> *<a class="el" href="a00088.html#aefea9b9a4459e69921926a66608bf50e">vm</a>, <a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *chunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga22975a881ddcbcf8e24515cd7411bd4b">dj_mem_updateSystemReference</a> (<a class="el" href="a00046.html#a789e305fed516672c865a933b161e2fb">dj_vm</a> *<a class="el" href="a00088.html#aefea9b9a4459e69921926a66608bf50e">vm</a>, <a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *chunk)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga352ab40af7df5b58b8d4df8427cb551d">dj_mem_compact</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga08ba6b225dc8ccb84f1dad629857385a">dj_mem_gc</a> ()</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#gabad8e161c8a9acde75532eb1375fa0e5">heap_base</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00046.html#a82c216fbce658284af9f5ee4b6b35c71">dj_object</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga5ff1b30533723eeab5c892a56ebbbbb1">panicExceptionObject</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga62cc073fe56f29f4399b2d90efbc8550">heap_size</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static <a class="el" href="a00053.html#a95c8e5ec70694afaac0e78c3561e32b2">ref_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga260be1aeaca8982635b4a7ff17ef122f">refStack</a> [HEAP_REFSTACKSIZE]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga6806ea99cf3c4de2629c8b1fbf522658">refStackPointer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#ga11369b23c7daacf0281c66ebf790d766">left_pointer</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">static void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00095.html#gae1d9036c9c294766d1574f0bdcad8a1a">right_pointer</a></td></tr>
</table>
<div class="textblock"><p>Darjeeling manages its own heap using garbage collection. Java objects and internal objects (threads, stack frames, infusions etc) are mixed. Each heap element (chunk) carries a byte that indicates its type. Some type numbers are reserved for internal objects or arrays, the other numbers are used for Class ID's.</p>
<p>The Heap manager implements a simple mark &amp; compact garbage collector. Blocks are allocated using pointer bumping for quick allocation.</p>
<p>The marking algorithm is a stop-the-world tri-color marker. The root set is first marked directly and set to gray or black. The heap is then sweeped pulling each gray block into the black set by following its references and marking them gray. The heap is sweeped in consecutive passes until there are no more gray elements on the heap.</p>
<p>Because Darjeeling separates reference and integer values in allocated Objects and on the stack, the root set can be marked directly by following these reference values. This means that there are no false positives in the root set and that marking the root set is done efficiently.</p>
<p>Eventually the code from this garbage collector should be merged with the code from the old mark &amp; sweep collector so that allocation is done using a free list and compaction is only triggered when absolutely neccesairy.</p>
<p>Because calls to <a class="el" href="a00095.html#ga63dd8be2446b72b2efe36d04ee3f8946">dj_mem_alloc()</a> can trigger garbage compaction, pointers (in the C code) may be made invalid as the element they were pointing to may have been moved. In order to 'rescue' those pointers it is possible to push them onto a 'compaction stack' before the call and pop them after the call. If the element was moved, the pointer will have been updated accordingly.</p>
<p>For example:</p>
<p><code> // pop an object off the operand stack<br/>
 ref_t object = <a class="el" href="a00094.html#gac07953e9b02becee3edacf69a6937f4d">dj_exec_stackPopRef()</a>;<br/>
 <br/>
 // make sure the object pointer is updated on garbage compaction<br/>
 void dj_mem_pushCompactionUpdateStack(object);<br/>
 <br/>
 // do some memory allocation<br/>
 void * something = dj_mem_alloc(...);<br/>
 <br/>
 // get the (possibly) updated object pointer back<br/>
 object = ref_t <a class="el" href="a00095.html#ga909e403bf076c4317a914c13993cb5c7">dj_mem_popCompactionUpdateStack()</a>;<br/>
 <br/>
 </code> </p>
</div><hr/><h2>Function Documentation</h2>
<a class="anchor" id="gabfa81ed838dfda79d32b856544e47a44"></a><!-- doxytag: member="heap.c::dj_finalise" ref="gabfa81ed838dfda79d32b856544e47a44" args="(heap_chunk *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dj_finalise </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>We'll add hooks to object finalisers here later </p>

</div>
</div>
<a class="anchor" id="ga63dd8be2446b72b2efe36d04ee3f8946"></a><!-- doxytag: member="heap.c::dj_mem_alloc" ref="ga63dd8be2446b72b2efe36d04ee3f8946" args="(uint16_t size, uint16_t id)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* dj_mem_alloc </td>
          <td>(</td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Allocates &lt;emph&gt;size&lt;/emph&gt; bytes. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>size in bytes </td></tr>
    <tr><td class="paramname">id</td><td>chunk ID. </td></tr>
  </table>
  </dd>
</dl>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00095_ga63dd8be2446b72b2efe36d04ee3f8946_cgraph.png" border="0" usemap="#a00095_ga63dd8be2446b72b2efe36d04ee3f8946_cgraph" alt=""/></div>
<map name="a00095_ga63dd8be2446b72b2efe36d04ee3f8946_cgraph" id="a00095_ga63dd8be2446b72b2efe36d04ee3f8946_cgraph">
<area shape="rect" id="node3" href="a00095.html#ga08ba6b225dc8ccb84f1dad629857385a" title="dj_mem_gc" alt="" coords="158,482,247,508"/><area shape="rect" id="node5" href="a00094.html#gad4193e9ff716dcc74ddecd37d5b7558c" title="dj_exec_getVM" alt="" coords="579,430,688,456"/><area shape="rect" id="node7" href="a00094.html#gabda58cee8d925b6765fb5cae460188a0" title="dj_exec_deactivateThread" alt="" coords="298,570,470,596"/><area shape="rect" id="node11" href="a00094.html#ga9e7e98f5fb3fd3e0dcb88b342555eccf" title="dj_exec_getCurrentThread" alt="" coords="297,620,471,647"/><area shape="rect" id="node13" href="a00095.html#ga29f5cc567ff4c9c4a29ccbb22488f6c8" title="dj_mem_mark" alt="" coords="331,303,437,330"/><area shape="rect" id="node58" href="a00095.html#ga352ab40af7df5b58b8d4df8427cb551d" title="dj_mem_compact" alt="" coords="322,519,446,546"/><area shape="rect" id="node102" href="a00094.html#gad0bce230fd90f617beab89df59f4a0d7" title="dj_exec_activate_thread" alt="" coords="821,379,982,406"/><area shape="rect" id="node9" href="a00094.html#gaacf3fea29a1f3c08f68437db75255ac6" title="dj_exec_saveLocalState" alt="" coords="554,1038,713,1064"/><area shape="rect" id="node16" href="a00049.html#a11005d44403c1506dbae28a997211ed0" title="dj_vm_markRootSet" alt="" coords="564,278,703,304"/><area shape="rect" id="node22" href="a00032.html#ac78bf28f794cad27bbd5ed1121bed9d3" title="dj_mem_setRefGrayIfWhite" alt="" coords="1339,100,1517,127"/><area shape="rect" id="node43" href="a00095.html#ga52d7d8ac8fe4a9112502af01591beb77" title="dj_mem_markObject" alt="" coords="562,328,705,355"/><area shape="rect" id="node56" href="a00095.html#gabfa81ed838dfda79d32b856544e47a44" title="dj_finalise" alt="" coords="593,227,673,254"/><area shape="rect" id="node18" href="a00051.html#a788caaee363c147c34e88016106bf8b5" title="dj_thread_markRootSet" alt="" coords="822,227,981,254"/><area shape="rect" id="node32" href="a00033.html#a3f9f4ae4f5bff32fab995349e96bca87" title="dj_infusion_markRootSet" alt="" coords="819,303,984,330"/><area shape="rect" id="node38" href="a00051.html#a94f5724e9a2ea5d45a753dc31993b3d5" title="dj_monitor_markRootSet" alt="" coords="1073,50,1239,76"/><area shape="rect" id="node20" href="a00032.html#a9a0d3b5f66f590ba053cbb7c6caf1826" title="dj_mem_setChunkColor" alt="" coords="1349,252,1507,279"/><area shape="rect" id="node24" href="a00051.html#aeffaacee100d5c8c586228fd30161fba" title="dj_frame_markRootSet" alt="" coords="1079,252,1233,279"/><area shape="rect" id="node28" href="a00029.html#ae42429f82d7f81175306bbff2d0185bf" title="dj_global_id_getMethodImplementation" alt="" coords="1305,404,1551,431"/><area shape="rect" id="node30" href="a00033.html#ab0dbab835a1fd3d61e72f5332103e6fb" title="dj_infusion_getMethodImplementation" alt="" coords="1600,404,1840,431"/><area shape="rect" id="node35" href="a00032.html#a62614a59a1b439b1ad5be2999e120c13" title="dj_mem_setRefColor" alt="" coords="1085,303,1227,330"/><area shape="rect" id="node45" href="a00032.html#a130141d87b0a95d93143d4a32e578660" title="dj_mem_getData" alt="" coords="841,582,961,608"/><area shape="rect" id="node47" href="a00049.html#ae15034be6f1e75c50c81f02ef9512b57" title="dj_vm_getRuntimeClassDefinition" alt="" coords="795,430,1007,456"/><area shape="rect" id="node49" href="a00049.html#a4ca5789f30f93d7ebc77e1e35b18d24a" title="dj_vm_getRuntimeClass" alt="" coords="1077,556,1235,583"/><area shape="rect" id="node53" href="a00033.html#a17b7823329640a33539c7c9656126bc4" title="dj_infusion_getClassDefinition" alt="" coords="1060,506,1252,532"/><area shape="rect" id="node51" href="a00044.html#a9d975fe6f2320afd55ba4e1f2d0f577e" title="dj_panic" alt="" coords="1393,506,1463,532"/><area shape="rect" id="node61" href="a00095.html#ga24390abc812e2057802ceb57e482ab6a" title="dj_mem_updateManagedReference" alt="" coords="521,531,746,558"/><area shape="rect" id="node65" href="a00032.html#a3cf2ae0ef4a02003dfe8f163f6d1776c" title="dj_mem_getUpdatedReference" alt="" coords="1057,683,1255,710"/><area shape="rect" id="node72" href="a00095.html#ga22975a881ddcbcf8e24515cd7411bd4b" title="dj_mem_updateSystemReference" alt="" coords="526,784,741,811"/><area shape="rect" id="node77" href="a00032.html#a51496b3eac0f373dc541b5b3654454b7" title="dj_mem_getUpdatedPointer" alt="" coords="1065,835,1247,862"/><area shape="rect" id="node98" href="a00094.html#gaba7c7e271ac2f096887b8af0b0e902a2" title="dj_exec_updatePointers" alt="" coords="822,683,981,710"/><area shape="rect" id="node69" href="a00016.html#a26b16ce91af6b76ab708f11c118f8fe6" title="dj_ref_array_updatePointers" alt="" coords="809,632,994,659"/><area shape="rect" id="node67" href="a00032.html#a64267f58686d5eefe4bd3d5dc81cc75c" title="dj_mem_getChunkShift" alt="" coords="1351,784,1505,811"/><area shape="rect" id="node74" href="a00033.html#a622a21c091570f390eaef1777013a8a7" title="dj_infusion_updatePointers" alt="" coords="813,784,989,811"/><area shape="rect" id="node82" href="a00049.html#ab55a4c94937c683cb0c88477d337d3f2" title="dj_vm_updatePointers" alt="" coords="827,936,976,963"/><area shape="rect" id="node85" href="a00051.html#af5983b3e1cfc93ebec95c281129a30e1" title="dj_thread_updatePointers" alt="" coords="817,886,986,912"/><area shape="rect" id="node88" href="a00051.html#a8f181a112b46c0d9b02113d9d218d0da" title="dj_monitor_block_updatePointers" alt="" coords="795,835,1007,862"/><area shape="rect" id="node91" href="a00051.html#a7d193e3d8e4d78f7c14aa7000cc31755" title="dj_frame_updatePointers" alt="" coords="818,734,985,760"/><area shape="rect" id="node104" href="a00094.html#ga8002f5fe2a3bb0732aa516efbae6bcd5" title="dj_exec_loadLocalState" alt="" coords="1078,404,1234,431"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga352ab40af7df5b58b8d4df8427cb551d"></a><!-- doxytag: member="heap.c::dj_mem_compact" ref="ga352ab40af7df5b58b8d4df8427cb551d" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dj_mem_compact </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00095_ga352ab40af7df5b58b8d4df8427cb551d_cgraph.png" border="0" usemap="#a00095_ga352ab40af7df5b58b8d4df8427cb551d_cgraph" alt=""/></div>
<map name="a00095_ga352ab40af7df5b58b8d4df8427cb551d_cgraph" id="a00095_ga352ab40af7df5b58b8d4df8427cb551d_cgraph">
<area shape="rect" id="node3" href="a00094.html#gad4193e9ff716dcc74ddecd37d5b7558c" title="dj_exec_getVM" alt="" coords="237,107,347,133"/><area shape="rect" id="node5" href="a00095.html#ga24390abc812e2057802ceb57e482ab6a" title="dj_mem_updateManagedReference" alt="" coords="179,157,405,184"/><area shape="rect" id="node17" href="a00032.html#a3cf2ae0ef4a02003dfe8f163f6d1776c" title="dj_mem_getUpdatedReference" alt="" coords="739,284,938,311"/><area shape="rect" id="node24" href="a00095.html#ga22975a881ddcbcf8e24515cd7411bd4b" title="dj_mem_updateSystemReference" alt="" coords="185,385,399,412"/><area shape="rect" id="node29" href="a00032.html#a51496b3eac0f373dc541b5b3654454b7" title="dj_mem_getUpdatedPointer" alt="" coords="748,436,929,463"/><area shape="rect" id="node53" href="a00094.html#gaba7c7e271ac2f096887b8af0b0e902a2" title="dj_exec_updatePointers" alt="" coords="481,284,639,311"/><area shape="rect" id="node7" href="a00049.html#ae15034be6f1e75c50c81f02ef9512b57" title="dj_vm_getRuntimeClassDefinition" alt="" coords="454,31,666,57"/><area shape="rect" id="node15" href="a00032.html#a130141d87b0a95d93143d4a32e578660" title="dj_mem_getData" alt="" coords="500,183,620,209"/><area shape="rect" id="node21" href="a00016.html#a26b16ce91af6b76ab708f11c118f8fe6" title="dj_ref_array_updatePointers" alt="" coords="467,132,653,159"/><area shape="rect" id="node9" href="a00049.html#a4ca5789f30f93d7ebc77e1e35b18d24a" title="dj_vm_getRuntimeClass" alt="" coords="759,5,918,32"/><area shape="rect" id="node13" href="a00033.html#a17b7823329640a33539c7c9656126bc4" title="dj_infusion_getClassDefinition" alt="" coords="743,56,935,83"/><area shape="rect" id="node11" href="a00044.html#a9d975fe6f2320afd55ba4e1f2d0f577e" title="dj_panic" alt="" coords="1095,5,1166,32"/><area shape="rect" id="node19" href="a00032.html#a64267f58686d5eefe4bd3d5dc81cc75c" title="dj_mem_getChunkShift" alt="" coords="1053,335,1208,361"/><area shape="rect" id="node26" href="a00033.html#a622a21c091570f390eaef1777013a8a7" title="dj_infusion_updatePointers" alt="" coords="472,335,648,361"/><area shape="rect" id="node34" href="a00049.html#ab55a4c94937c683cb0c88477d337d3f2" title="dj_vm_updatePointers" alt="" coords="485,436,635,463"/><area shape="rect" id="node37" href="a00051.html#af5983b3e1cfc93ebec95c281129a30e1" title="dj_thread_updatePointers" alt="" coords="475,487,645,513"/><area shape="rect" id="node40" href="a00051.html#a8f181a112b46c0d9b02113d9d218d0da" title="dj_monitor_block_updatePointers" alt="" coords="454,537,666,564"/><area shape="rect" id="node43" href="a00051.html#a7d193e3d8e4d78f7c14aa7000cc31755" title="dj_frame_updatePointers" alt="" coords="477,385,643,412"/><area shape="rect" id="node46" href="a00029.html#ae42429f82d7f81175306bbff2d0185bf" title="dj_global_id_getMethodImplementation" alt="" coords="715,385,962,412"/><area shape="rect" id="node48" href="a00033.html#ab0dbab835a1fd3d61e72f5332103e6fb" title="dj_infusion_getMethodImplementation" alt="" coords="1011,385,1251,412"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga80b28d254760b11eae5837091ba2170b"></a><!-- doxytag: member="heap.c::dj_mem_free" ref="ga80b28d254760b11eae5837091ba2170b" args="(void *ptr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dj_mem_free </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ptr</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Frees memory on the heap.  pointer to memory </p>

</div>
</div>
<a class="anchor" id="ga08ba6b225dc8ccb84f1dad629857385a"></a><!-- doxytag: member="heap.c::dj_mem_gc" ref="ga08ba6b225dc8ccb84f1dad629857385a" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dj_mem_gc </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00095_ga08ba6b225dc8ccb84f1dad629857385a_cgraph.png" border="0" usemap="#a00095_ga08ba6b225dc8ccb84f1dad629857385a_cgraph" alt=""/></div>
<map name="a00095_ga08ba6b225dc8ccb84f1dad629857385a_cgraph" id="a00095_ga08ba6b225dc8ccb84f1dad629857385a_cgraph">
<area shape="rect" id="node3" href="a00094.html#gad4193e9ff716dcc74ddecd37d5b7558c" title="dj_exec_getVM" alt="" coords="427,430,536,456"/><area shape="rect" id="node5" href="a00094.html#gabda58cee8d925b6765fb5cae460188a0" title="dj_exec_deactivateThread" alt="" coords="146,570,318,596"/><area shape="rect" id="node9" href="a00094.html#ga9e7e98f5fb3fd3e0dcb88b342555eccf" title="dj_exec_getCurrentThread" alt="" coords="145,620,319,647"/><area shape="rect" id="node11" href="a00095.html#ga29f5cc567ff4c9c4a29ccbb22488f6c8" title="dj_mem_mark" alt="" coords="179,303,285,330"/><area shape="rect" id="node56" href="a00095.html#ga352ab40af7df5b58b8d4df8427cb551d" title="dj_mem_compact" alt="" coords="170,519,294,546"/><area shape="rect" id="node100" href="a00094.html#gad0bce230fd90f617beab89df59f4a0d7" title="dj_exec_activate_thread" alt="" coords="669,379,830,406"/><area shape="rect" id="node7" href="a00094.html#gaacf3fea29a1f3c08f68437db75255ac6" title="dj_exec_saveLocalState" alt="" coords="402,1038,561,1064"/><area shape="rect" id="node14" href="a00049.html#a11005d44403c1506dbae28a997211ed0" title="dj_vm_markRootSet" alt="" coords="412,278,551,304"/><area shape="rect" id="node20" href="a00032.html#ac78bf28f794cad27bbd5ed1121bed9d3" title="dj_mem_setRefGrayIfWhite" alt="" coords="1187,100,1365,127"/><area shape="rect" id="node41" href="a00095.html#ga52d7d8ac8fe4a9112502af01591beb77" title="dj_mem_markObject" alt="" coords="410,328,553,355"/><area shape="rect" id="node54" href="a00095.html#gabfa81ed838dfda79d32b856544e47a44" title="dj_finalise" alt="" coords="441,227,521,254"/><area shape="rect" id="node16" href="a00051.html#a788caaee363c147c34e88016106bf8b5" title="dj_thread_markRootSet" alt="" coords="670,227,829,254"/><area shape="rect" id="node30" href="a00033.html#a3f9f4ae4f5bff32fab995349e96bca87" title="dj_infusion_markRootSet" alt="" coords="667,303,832,330"/><area shape="rect" id="node36" href="a00051.html#a94f5724e9a2ea5d45a753dc31993b3d5" title="dj_monitor_markRootSet" alt="" coords="921,50,1087,76"/><area shape="rect" id="node18" href="a00032.html#a9a0d3b5f66f590ba053cbb7c6caf1826" title="dj_mem_setChunkColor" alt="" coords="1197,252,1355,279"/><area shape="rect" id="node22" href="a00051.html#aeffaacee100d5c8c586228fd30161fba" title="dj_frame_markRootSet" alt="" coords="927,252,1081,279"/><area shape="rect" id="node26" href="a00029.html#ae42429f82d7f81175306bbff2d0185bf" title="dj_global_id_getMethodImplementation" alt="" coords="1153,404,1399,431"/><area shape="rect" id="node28" href="a00033.html#ab0dbab835a1fd3d61e72f5332103e6fb" title="dj_infusion_getMethodImplementation" alt="" coords="1448,404,1688,431"/><area shape="rect" id="node33" href="a00032.html#a62614a59a1b439b1ad5be2999e120c13" title="dj_mem_setRefColor" alt="" coords="933,303,1075,330"/><area shape="rect" id="node43" href="a00032.html#a130141d87b0a95d93143d4a32e578660" title="dj_mem_getData" alt="" coords="689,582,809,608"/><area shape="rect" id="node45" href="a00049.html#ae15034be6f1e75c50c81f02ef9512b57" title="dj_vm_getRuntimeClassDefinition" alt="" coords="643,430,855,456"/><area shape="rect" id="node47" href="a00049.html#a4ca5789f30f93d7ebc77e1e35b18d24a" title="dj_vm_getRuntimeClass" alt="" coords="925,556,1083,583"/><area shape="rect" id="node51" href="a00033.html#a17b7823329640a33539c7c9656126bc4" title="dj_infusion_getClassDefinition" alt="" coords="908,506,1100,532"/><area shape="rect" id="node49" href="a00044.html#a9d975fe6f2320afd55ba4e1f2d0f577e" title="dj_panic" alt="" coords="1241,506,1311,532"/><area shape="rect" id="node59" href="a00095.html#ga24390abc812e2057802ceb57e482ab6a" title="dj_mem_updateManagedReference" alt="" coords="369,531,594,558"/><area shape="rect" id="node63" href="a00032.html#a3cf2ae0ef4a02003dfe8f163f6d1776c" title="dj_mem_getUpdatedReference" alt="" coords="905,683,1103,710"/><area shape="rect" id="node70" href="a00095.html#ga22975a881ddcbcf8e24515cd7411bd4b" title="dj_mem_updateSystemReference" alt="" coords="374,784,589,811"/><area shape="rect" id="node75" href="a00032.html#a51496b3eac0f373dc541b5b3654454b7" title="dj_mem_getUpdatedPointer" alt="" coords="913,835,1095,862"/><area shape="rect" id="node96" href="a00094.html#gaba7c7e271ac2f096887b8af0b0e902a2" title="dj_exec_updatePointers" alt="" coords="670,683,829,710"/><area shape="rect" id="node67" href="a00016.html#a26b16ce91af6b76ab708f11c118f8fe6" title="dj_ref_array_updatePointers" alt="" coords="657,632,842,659"/><area shape="rect" id="node65" href="a00032.html#a64267f58686d5eefe4bd3d5dc81cc75c" title="dj_mem_getChunkShift" alt="" coords="1199,784,1353,811"/><area shape="rect" id="node72" href="a00033.html#a622a21c091570f390eaef1777013a8a7" title="dj_infusion_updatePointers" alt="" coords="661,784,837,811"/><area shape="rect" id="node80" href="a00049.html#ab55a4c94937c683cb0c88477d337d3f2" title="dj_vm_updatePointers" alt="" coords="675,936,824,963"/><area shape="rect" id="node83" href="a00051.html#af5983b3e1cfc93ebec95c281129a30e1" title="dj_thread_updatePointers" alt="" coords="665,886,834,912"/><area shape="rect" id="node86" href="a00051.html#a8f181a112b46c0d9b02113d9d218d0da" title="dj_monitor_block_updatePointers" alt="" coords="643,835,855,862"/><area shape="rect" id="node89" href="a00051.html#a7d193e3d8e4d78f7c14aa7000cc31755" title="dj_frame_updatePointers" alt="" coords="666,734,833,760"/><area shape="rect" id="node102" href="a00094.html#ga8002f5fe2a3bb0732aa516efbae6bcd5" title="dj_exec_loadLocalState" alt="" coords="926,404,1082,431"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga4329550f3015b5ae66f9fea0784097b9"></a><!-- doxytag: member="heap.c::dj_mem_getFree" ref="ga4329550f3015b5ae66f9fea0784097b9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t dj_mem_getFree </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of bytes left on the heap. </dd></dl>

</div>
</div>
<a class="anchor" id="gaee46ca14b2599fff18762a5c99433589"></a><!-- doxytag: member="heap.c::dj_mem_getPanicExceptionObject" ref="gaee46ca14b2599fff18762a5c99433589" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00046.html#a82c216fbce658284af9f5ee4b6b35c71">dj_object</a>* dj_mem_getPanicExceptionObject </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gae71125d192c6cebf730f1c445d980a76"></a><!-- doxytag: member="heap.c::dj_mem_getSize" ref="gae71125d192c6cebf730f1c445d980a76" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t dj_mem_getSize </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>the total number of bytes on the heap. </dd></dl>

</div>
</div>
<a class="anchor" id="ga9df18987debdbef5a02f1d9cdd4e4386"></a><!-- doxytag: member="heap.c::dj_mem_init" ref="ga9df18987debdbef5a02f1d9cdd4e4386" args="(void *mem_pointer, uint16_t mem_size)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dj_mem_init </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>mem_pointer</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>mem_size</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initialises the memory manager. A call to this function may trigger garbage collection. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">mem_pointer</td><td>pointer to where Darjeeling can manage its heap </td></tr>
    <tr><td class="paramname">mem_size</td><td>size of the heap </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga29f5cc567ff4c9c4a29ccbb22488f6c8"></a><!-- doxytag: member="heap.c::dj_mem_mark" ref="ga29f5cc567ff4c9c4a29ccbb22488f6c8" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dj_mem_mark </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements the marking phase using stop-the-world tri-color marking </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00095_ga29f5cc567ff4c9c4a29ccbb22488f6c8_cgraph.png" border="0" usemap="#a00095_ga29f5cc567ff4c9c4a29ccbb22488f6c8_cgraph" alt=""/></div>
<map name="a00095_ga29f5cc567ff4c9c4a29ccbb22488f6c8_cgraph" id="a00095_ga29f5cc567ff4c9c4a29ccbb22488f6c8_cgraph">
<area shape="rect" id="node3" href="a00094.html#gad4193e9ff716dcc74ddecd37d5b7558c" title="dj_exec_getVM" alt="" coords="177,208,287,235"/><area shape="rect" id="node5" href="a00049.html#a11005d44403c1506dbae28a997211ed0" title="dj_vm_markRootSet" alt="" coords="163,259,301,285"/><area shape="rect" id="node11" href="a00032.html#ac78bf28f794cad27bbd5ed1121bed9d3" title="dj_mem_setRefGrayIfWhite" alt="" coords="888,259,1067,285"/><area shape="rect" id="node32" href="a00095.html#ga52d7d8ac8fe4a9112502af01591beb77" title="dj_mem_markObject" alt="" coords="161,360,303,387"/><area shape="rect" id="node45" href="a00095.html#gabfa81ed838dfda79d32b856544e47a44" title="dj_finalise" alt="" coords="192,411,272,437"/><area shape="rect" id="node7" href="a00051.html#a788caaee363c147c34e88016106bf8b5" title="dj_thread_markRootSet" alt="" coords="379,183,538,209"/><area shape="rect" id="node21" href="a00033.html#a3f9f4ae4f5bff32fab995349e96bca87" title="dj_infusion_markRootSet" alt="" coords="376,56,541,83"/><area shape="rect" id="node27" href="a00051.html#a94f5724e9a2ea5d45a753dc31993b3d5" title="dj_monitor_markRootSet" alt="" coords="627,259,792,285"/><area shape="rect" id="node9" href="a00032.html#a9a0d3b5f66f590ba053cbb7c6caf1826" title="dj_mem_setChunkColor" alt="" coords="898,107,1057,133"/><area shape="rect" id="node13" href="a00051.html#aeffaacee100d5c8c586228fd30161fba" title="dj_frame_markRootSet" alt="" coords="632,157,787,184"/><area shape="rect" id="node17" href="a00029.html#ae42429f82d7f81175306bbff2d0185bf" title="dj_global_id_getMethodImplementation" alt="" coords="854,157,1101,184"/><area shape="rect" id="node19" href="a00033.html#ab0dbab835a1fd3d61e72f5332103e6fb" title="dj_infusion_getMethodImplementation" alt="" coords="1149,157,1389,184"/><area shape="rect" id="node24" href="a00032.html#a62614a59a1b439b1ad5be2999e120c13" title="dj_mem_setRefColor" alt="" coords="638,5,781,32"/><area shape="rect" id="node34" href="a00032.html#a130141d87b0a95d93143d4a32e578660" title="dj_mem_getData" alt="" coords="399,461,519,488"/><area shape="rect" id="node36" href="a00049.html#ae15034be6f1e75c50c81f02ef9512b57" title="dj_vm_getRuntimeClassDefinition" alt="" coords="353,411,565,437"/><area shape="rect" id="node38" href="a00049.html#a4ca5789f30f93d7ebc77e1e35b18d24a" title="dj_vm_getRuntimeClass" alt="" coords="630,461,789,488"/><area shape="rect" id="node42" href="a00033.html#a17b7823329640a33539c7c9656126bc4" title="dj_infusion_getClassDefinition" alt="" coords="613,411,805,437"/><area shape="rect" id="node40" href="a00044.html#a9d975fe6f2320afd55ba4e1f2d0f577e" title="dj_panic" alt="" coords="942,461,1013,488"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga52d7d8ac8fe4a9112502af01591beb77"></a><!-- doxytag: member="heap.c::dj_mem_markObject" ref="ga52d7d8ac8fe4a9112502af01591beb77" args="(dj_vm *vm, heap_chunk *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dj_mem_markObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00046.html#a789e305fed516672c865a933b161e2fb">dj_vm</a> *&#160;</td>
          <td class="paramname"><em>vm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Implements the marking phase using stop-the-world tri-color marking </p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00095_ga52d7d8ac8fe4a9112502af01591beb77_cgraph.png" border="0" usemap="#a00095_ga52d7d8ac8fe4a9112502af01591beb77_cgraph" alt=""/></div>
<map name="a00095_ga52d7d8ac8fe4a9112502af01591beb77_cgraph" id="a00095_ga52d7d8ac8fe4a9112502af01591beb77_cgraph">
<area shape="rect" id="node3" href="a00032.html#a130141d87b0a95d93143d4a32e578660" title="dj_mem_getData" alt="" coords="244,5,364,32"/><area shape="rect" id="node5" href="a00049.html#ae15034be6f1e75c50c81f02ef9512b57" title="dj_vm_getRuntimeClassDefinition" alt="" coords="198,56,410,83"/><area shape="rect" id="node13" href="a00032.html#ac78bf28f794cad27bbd5ed1121bed9d3" title="dj_mem_setRefGrayIfWhite" alt="" coords="215,107,393,133"/><area shape="rect" id="node7" href="a00049.html#a4ca5789f30f93d7ebc77e1e35b18d24a" title="dj_vm_getRuntimeClass" alt="" coords="475,31,634,57"/><area shape="rect" id="node11" href="a00033.html#a17b7823329640a33539c7c9656126bc4" title="dj_infusion_getClassDefinition" alt="" coords="459,81,651,108"/><area shape="rect" id="node9" href="a00044.html#a9d975fe6f2320afd55ba4e1f2d0f577e" title="dj_panic" alt="" coords="699,31,770,57"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga909e403bf076c4317a914c13993cb5c7"></a><!-- doxytag: member="heap.c::dj_mem_popCompactionUpdateStack" ref="ga909e403bf076c4317a914c13993cb5c7" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00053.html#a95c8e5ec70694afaac0e78c3561e32b2">ref_t</a> dj_mem_popCompactionUpdateStack </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pops a reference from the compaction update stack. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>updated reference </dd></dl>

</div>
</div>
<a class="anchor" id="ga57770558d70867ea230a516fb5022fc5"></a><!-- doxytag: member="heap.c::dj_mem_pushCompactionUpdateStack" ref="ga57770558d70867ea230a516fb5022fc5" args="(ref_t ref)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dj_mem_pushCompactionUpdateStack </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00053.html#a95c8e5ec70694afaac0e78c3561e32b2">ref_t</a>&#160;</td>
          <td class="paramname"><em>ref</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Pushes a reference on the compaction update stack. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramname">ref</td><td>the reference to keep updated during compaction. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="ga5aaeb88707f0a8e5c9e70ed5ed71b1d1"></a><!-- doxytag: member="heap.c::dj_mem_setPanicExceptionObject" ref="ga5aaeb88707f0a8e5c9e70ed5ed71b1d1" args="(dj_object *obj)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dj_mem_setPanicExceptionObject </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00046.html#a82c216fbce658284af9f5ee4b6b35c71">dj_object</a> *&#160;</td>
          <td class="paramname"><em>obj</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gaaabe6bdf2d27f2e696117ce6dc981c72"></a><!-- doxytag: member="heap.c::dj_mem_shiftRuntimeIDs" ref="gaaabe6bdf2d27f2e696117ce6dc981c72" args="(runtime_id_t start, uint16_t range)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void dj_mem_shiftRuntimeIDs </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00046.html#ac36eb8e5b5b5fb52bc355c65e07c7432">runtime_id_t</a>&#160;</td>
          <td class="paramname"><em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t&#160;</td>
          <td class="paramname"><em>range</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Shifts the runtime IDs of objects on the heap to correct ranges when infusions are unloaded. Any id within [start, start+range&gt; is marked invalid (as the infusion that holds the Class definition for that object is unloaded), and IDs in [start+range, -&gt;&gt; are mapped to [start,-&gt;&gt; </p>

</div>
</div>
<a class="anchor" id="ga24390abc812e2057802ceb57e482ab6a"></a><!-- doxytag: member="heap.c::dj_mem_updateManagedReference" ref="ga24390abc812e2057802ceb57e482ab6a" args="(dj_vm *vm, heap_chunk *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dj_mem_updateManagedReference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00046.html#a789e305fed516672c865a933b161e2fb">dj_vm</a> *&#160;</td>
          <td class="paramname"><em>vm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00095_ga24390abc812e2057802ceb57e482ab6a_cgraph.png" border="0" usemap="#a00095_ga24390abc812e2057802ceb57e482ab6a_cgraph" alt=""/></div>
<map name="a00095_ga24390abc812e2057802ceb57e482ab6a_cgraph" id="a00095_ga24390abc812e2057802ceb57e482ab6a_cgraph">
<area shape="rect" id="node3" href="a00049.html#ae15034be6f1e75c50c81f02ef9512b57" title="dj_vm_getRuntimeClassDefinition" alt="" coords="281,17,493,44"/><area shape="rect" id="node11" href="a00032.html#a130141d87b0a95d93143d4a32e578660" title="dj_mem_getData" alt="" coords="327,68,447,95"/><area shape="rect" id="node13" href="a00032.html#a3cf2ae0ef4a02003dfe8f163f6d1776c" title="dj_mem_getUpdatedReference" alt="" coords="542,132,741,159"/><area shape="rect" id="node17" href="a00016.html#a26b16ce91af6b76ab708f11c118f8fe6" title="dj_ref_array_updatePointers" alt="" coords="294,169,479,196"/><area shape="rect" id="node5" href="a00049.html#a4ca5789f30f93d7ebc77e1e35b18d24a" title="dj_vm_getRuntimeClass" alt="" coords="562,5,721,32"/><area shape="rect" id="node9" href="a00033.html#a17b7823329640a33539c7c9656126bc4" title="dj_infusion_getClassDefinition" alt="" coords="545,56,737,83"/><area shape="rect" id="node7" href="a00044.html#a9d975fe6f2320afd55ba4e1f2d0f577e" title="dj_panic" alt="" coords="831,5,902,32"/><area shape="rect" id="node15" href="a00032.html#a64267f58686d5eefe4bd3d5dc81cc75c" title="dj_mem_getChunkShift" alt="" coords="789,132,944,159"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="ga22975a881ddcbcf8e24515cd7411bd4b"></a><!-- doxytag: member="heap.c::dj_mem_updateSystemReference" ref="ga22975a881ddcbcf8e24515cd7411bd4b" args="(dj_vm *vm, heap_chunk *chunk)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static void dj_mem_updateSystemReference </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00046.html#a789e305fed516672c865a933b161e2fb">dj_vm</a> *&#160;</td>
          <td class="paramname"><em>vm</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00032.html#a049ed302cb7d0433d455b9e2c398d900">heap_chunk</a> *&#160;</td>
          <td class="paramname"><em>chunk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [inline, static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00095_ga22975a881ddcbcf8e24515cd7411bd4b_cgraph.png" border="0" usemap="#a00095_ga22975a881ddcbcf8e24515cd7411bd4b_cgraph" alt=""/></div>
<map name="a00095_ga22975a881ddcbcf8e24515cd7411bd4b_cgraph" id="a00095_ga22975a881ddcbcf8e24515cd7411bd4b_cgraph">
<area shape="rect" id="node3" href="a00033.html#a622a21c091570f390eaef1777013a8a7" title="dj_infusion_updatePointers" alt="" coords="288,107,464,133"/><area shape="rect" id="node13" href="a00032.html#a130141d87b0a95d93143d4a32e578660" title="dj_mem_getData" alt="" coords="316,309,436,336"/><area shape="rect" id="node15" href="a00049.html#ab55a4c94937c683cb0c88477d337d3f2" title="dj_vm_updatePointers" alt="" coords="301,157,451,184"/><area shape="rect" id="node18" href="a00051.html#af5983b3e1cfc93ebec95c281129a30e1" title="dj_thread_updatePointers" alt="" coords="291,208,461,235"/><area shape="rect" id="node21" href="a00051.html#a8f181a112b46c0d9b02113d9d218d0da" title="dj_monitor_block_updatePointers" alt="" coords="270,259,482,285"/><area shape="rect" id="node24" href="a00051.html#a7d193e3d8e4d78f7c14aa7000cc31755" title="dj_frame_updatePointers" alt="" coords="293,56,459,83"/><area shape="rect" id="node5" href="a00032.html#a3cf2ae0ef4a02003dfe8f163f6d1776c" title="dj_mem_getUpdatedReference" alt="" coords="555,56,754,83"/><area shape="rect" id="node7" href="a00032.html#a64267f58686d5eefe4bd3d5dc81cc75c" title="dj_mem_getChunkShift" alt="" coords="869,107,1024,133"/><area shape="rect" id="node9" href="a00032.html#a51496b3eac0f373dc541b5b3654454b7" title="dj_mem_getUpdatedPointer" alt="" coords="564,157,745,184"/><area shape="rect" id="node27" href="a00029.html#ae42429f82d7f81175306bbff2d0185bf" title="dj_global_id_getMethodImplementation" alt="" coords="531,5,778,32"/><area shape="rect" id="node29" href="a00033.html#ab0dbab835a1fd3d61e72f5332103e6fb" title="dj_infusion_getMethodImplementation" alt="" coords="827,5,1067,32"/></map>
</div>
</p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="gabad8e161c8a9acde75532eb1375fa0e5"></a><!-- doxytag: member="heap.c::heap_base" ref="gabad8e161c8a9acde75532eb1375fa0e5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* <a class="el" href="a00095.html#gabad8e161c8a9acde75532eb1375fa0e5">heap_base</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga62cc073fe56f29f4399b2d90efbc8550"></a><!-- doxytag: member="heap.c::heap_size" ref="ga62cc073fe56f29f4399b2d90efbc8550" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="a00095.html#ga62cc073fe56f29f4399b2d90efbc8550">heap_size</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga11369b23c7daacf0281c66ebf790d766"></a><!-- doxytag: member="heap.c::left_pointer" ref="ga11369b23c7daacf0281c66ebf790d766" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void* <a class="el" href="a00095.html#ga11369b23c7daacf0281c66ebf790d766">left_pointer</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga5ff1b30533723eeab5c892a56ebbbbb1"></a><!-- doxytag: member="heap.c::panicExceptionObject" ref="ga5ff1b30533723eeab5c892a56ebbbbb1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00046.html#a82c216fbce658284af9f5ee4b6b35c71">dj_object</a>* <a class="el" href="a00095.html#ga5ff1b30533723eeab5c892a56ebbbbb1">panicExceptionObject</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga260be1aeaca8982635b4a7ff17ef122f"></a><!-- doxytag: member="heap.c::refStack" ref="ga260be1aeaca8982635b4a7ff17ef122f" args="[HEAP_REFSTACKSIZE]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00053.html#a95c8e5ec70694afaac0e78c3561e32b2">ref_t</a> <a class="el" href="a00095.html#ga260be1aeaca8982635b4a7ff17ef122f">refStack</a>[HEAP_REFSTACKSIZE]<code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga6806ea99cf3c4de2629c8b1fbf522658"></a><!-- doxytag: member="heap.c::refStackPointer" ref="ga6806ea99cf3c4de2629c8b1fbf522658" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t <a class="el" href="a00095.html#ga6806ea99cf3c4de2629c8b1fbf522658">refStackPointer</a><code> [static]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gae1d9036c9c294766d1574f0bdcad8a1a"></a><!-- doxytag: member="heap.c::right_pointer" ref="gae1d9036c9c294766d1574f0bdcad8a1a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * <a class="el" href="a00095.html#gae1d9036c9c294766d1574f0bdcad8a1a">right_pointer</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>


<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 14 2011 15:03:18 for Darjeeling by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
